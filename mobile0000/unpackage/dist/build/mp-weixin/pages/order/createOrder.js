(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/createOrder"],{"2c99":function(t,e,n){"use strict";n.r(e);var o=n("bebf"),a=n("2d3c");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("e8d2");var i,c=n("f0c5"),s=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=s.exports},"2d3c":function(t,e,n){"use strict";n.r(e);var o=n("3238"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=a.a},3238:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{user_id:0,serial_number:"",cartList:[],amount:0,quantity:0,contact_name:"",contact_phone:"",country:"",province:"",city:"",address:"",postcode:"",message:""}},onShow:function(){var e=t.getStorageSync("selected_address");this.contact_name=e.contact_name,this.contact_phone=e.contact_phone,this.country=e.country,this.province=e.province,this.city=e.city,this.address=e.address,this.postcode=e.postcode,this.serial_number=this.getSerialNumber()},onLoad:function(e){if(1==e.source){var n=JSON.parse(decodeURIComponent(e.product)),o=e.quantity;console.log(n),console.log(e.quantity),console.log(e.total);var a={product:n,quantity:o};this.user_id=t.getStorageSync("userDetail").id,this.cartList.push(a),this.amount=e.total,this.quantity=e.quantity}else this.cartList=JSON.parse(decodeURIComponent(e.data)),this.amount=e.total,this.quantity=e.quantity,this.user_id=t.getStorageSync("userDetail").id},methods:{getSerialNumber:function(){var t=new Date,e=String(t.getFullYear()),n=String(t.getMonth()+1),o=String(t.getDate()),a=String(t.getHours()),r=String(t.getMinutes()),i=String(t.getSeconds());n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),i.length<2&&(i="0"+i);var c=e+n+o+a+r+i;return c+"00001"},submit:function(){var e=this;if(!this.contact_name)return t.showToast({title:"请选择地址",icon:"none",duration:2e3}),!1;new Promise((function(n){t.request({url:e.api.ApiRoot+"orders/",data:{user:e.user_id,serial_number:e.serial_number,name:e.contact_name,phone:e.contact_phone,country:e.country,province:e.province,city:e.city,address:e.address,postcode:e.postcode,message:e.message,amount:e.amount,quantity:e.quantity,details:e.cartList},method:"POST",success:function(n){if(201==n.statusCode){console.log(n);var o=e.amount,a=e.serial_number;t.navigateTo({url:"/pages/money/pay?source=1&amount=".concat(o,"&serial=").concat(a)})}},fail:function(e){console.log(e),t.showToast({title:"当前出现问题请稍后再试",icon:"none",duration:2e3})}})})).catch((function(t){}))},stopPrevent:function(){}}};e.default=n}).call(this,n("543d")["default"])},"493b":function(t,e,n){},"937a":function(t,e,n){"use strict";(function(t){n("351e"),n("921b");o(n("66fd"));var e=o(n("2c99"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},bebf:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement;t._self._c},r=[]},e8d2:function(t,e,n){"use strict";var o=n("493b"),a=n.n(o);a.a}},[["937a","common/runtime","common/vendor"]]]);