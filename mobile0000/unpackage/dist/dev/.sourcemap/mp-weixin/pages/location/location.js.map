{"version":3,"sources":["uni-app:///main.js","webpack:////Users/Wang/Documents/kh0706/kh_community/mobile0000/pages/location/location.vue?93d6","webpack:////Users/Wang/Documents/kh0706/kh_community/mobile0000/pages/location/location.vue?12e6","webpack:////Users/Wang/Documents/kh0706/kh_community/mobile0000/pages/location/location.vue?f857","webpack:////Users/Wang/Documents/kh0706/kh_community/mobile0000/pages/location/location.vue?04ed","uni-app:///pages/location/location.vue","webpack:////Users/Wang/Documents/kh0706/kh_community/mobile0000/pages/location/location.vue?4072","webpack:////Users/Wang/Documents/kh0706/kh_community/mobile0000/pages/location/location.vue?14ff"],"names":["createPage","Page"],"mappings":"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","file":"pages/location/location.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/location/location.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./location.vue?vue&type=template&id=1dc6e226&\"\nvar renderjs\nimport script from \"./location.vue?vue&type=script&lang=js&\"\nexport * from \"./location.vue?vue&type=script&lang=js&\"\nimport style0 from \"./location.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/location/location.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./location.vue?vue&type=template&id=1dc6e226&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./location.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./location.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<map class=\"map\" id=\"map1\" ref=\"map1\" :controls=\"controls\" :longitude=\"location.longitude\" :latitude=\"location.latitude\"\r\n\t\t :show-location=\"showLocation\" :show-compass=\"showCompass\" :enable-overlooking=\"enableOverlooking\" :enable-zoom=\"enableZoom\"\r\n\t\t :enable-scroll=\"enableScroll\" :enable-rotate=\"enableRotate\" :enable-traffic=\"enableTraffic\" :markers=\"markers\"\r\n\t\t :include-points=\"includePoints\" @controltap=\"oncontroltap\" @makertap='makertap'>\r\n\t\t</map>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar util = require('@/common/util.js');\r\n\tvar formatLocation = util.formatLocation;\r\n\t// #ifdef APP-PLUS\r\n\timport permision from \"@/common/permission.js\"\r\n\t// #endif\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tid: 0,\r\n\t\t\t\tusers: [],\r\n\t\t\t\tpos_id: 0,\r\n\t\t\t\tpositions: [],\r\n\t\t\t\thasLocation: false,\r\n\t\t\t\tlocation: {\r\n\t\t\t\t\tlatitude: 39.908692,\r\n\t\t\t\t\tlongitude: 116.397477\r\n\t\t\t\t},\r\n\t\t\t\tcontrols: [{\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tposition: {\r\n\t\t\t\t\t\tleft: 5,\r\n\t\t\t\t\t\ttop: 180,\r\n\t\t\t\t\t\twidth: 30,\r\n\t\t\t\t\t\theight: 30\r\n\t\t\t\t\t},\r\n\t\t\t\t\ticonPath: '/static/logo.png',\r\n\t\t\t\t\tclickable: true\r\n\t\t\t\t}],\r\n\t\t\t\tincludePoints: [],\r\n\t\t\t\tshowLocation: true,\r\n\t\t\t\tscale:13,\r\n\t\t\t\tshowCompass: true,\r\n\t\t\t\tenableZoom: true,\r\n\t\t\t\tenableScroll: true,\r\n\t\t\t\tenableRotate: true,\r\n\t\t\t\tenableSatellite: false,\r\n\t\t\t\tenableTraffic: false,\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\tincludePoints: [],\r\n\t\t\t\trotate: 0,\r\n\r\n\r\n\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.loadData();\r\n\r\n\t\t\t//this.getLocation();\r\n\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.map = uni.createMapContext(\"map1\", this);\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\t\tchangeShowCompass(e) {\r\n\t\t\t\tthis.showCompass = e.detail.value;\r\n\t\t\t},\r\n\t\t\tchangeEnableOverlooking(e) {\r\n\t\t\t\tthis.enableOverlooking = e.detail.value;\r\n\t\t\t},\r\n\t\t\tchangeEnableZoom(e) {\r\n\t\t\t\tthis.enableZoom = e.detail.value;\r\n\t\t\t},\r\n\t\t\tchangeEnableScroll(e) {\r\n\t\t\t\tthis.enableScroll = e.detail.value;\r\n\t\t\t},\r\n\t\t\tchangeEnableRotate(e) {\r\n\t\t\t\tthis.enableRotate = e.detail.value;\r\n\t\t\t},\r\n\t\t\tchangeEnableTraffic(e) {\r\n\t\t\t\tthis.enableTraffic = e.detail.value;\r\n\t\t\t},\r\n\t\t\tgetCenterLocation() {\r\n\t\t\t\tthis.map.getCenterLocation({\r\n\t\t\t\t\tsuccess: ret => {\r\n\t\t\t\t\t\t//console.log(JSON.stringify(ret));\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tasync loadData() {\r\n\t\t\t\tthis.id = uni.getStorageSync(\"userDetail\").id;\r\n\t\t\t\tvar userlist = await this.getUsers();\r\n\t\t\t\tthis.users = userlist;\r\n\t\t\t\tvar locationList = await this.getPositions();\r\n\t\t\t\tfor (var x in locationList) {\r\n\t\t\t\t\tif (locationList[x].user == this.id) {\r\n\t\t\t\t\t\tconsole.log(locationList[x]);\r\n\t\t\t\t\t\tthis.location.longitude = locationList[x].lng;\r\n\t\t\t\t\t\tthis.location.latitude = locationList[x].lat;\r\n\t\t\t\t\t\tthis.pos_id = locationList[x].id;\r\n\t\t\t\t\t\tconsole.log(\"我的地址ID是\" + this.pos_id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.positions = locationList;\r\n\t\t\t\tthis.transferPositionToMarker();\r\n\t\t\t\tthis.getLocation(this.pos_id);\r\n\r\n\t\t\t},\r\n\t\t\t//获取所有的用户信息\r\n\t\t\tgetUsers() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\turl: this.api.ApiRoot + \"users/\",\r\n\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch((e) => {});\r\n\t\t\t},\r\n\t\t\t//获取所有用户的位置信息\r\n\t\t\tgetPositions() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t//这里要先更新再\r\n\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\"content-type\": \"application/x-www-form-urlencoded\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\turl: this.api.ApiRoot + \"locations/\",\r\n\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tresolve(res.data);\r\n\r\n\t\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch((e) => {});\r\n\t\t\t},\r\n\t\t\t//坐标准换为markers\r\n\t\t\ttransferPositionToMarker() {\r\n\t\t\t\tvar pos = this.positions;\r\n\t\t\t\tvar marks = [];\r\n\t\t\t\tvar includePoints = [];\r\n\t\t\t\tfor (var i in pos) {\r\n\t\t\t\t\tconsole.log(pos[i]);\r\n\t\t\t\t\tincludePoints[i] = {\r\n\t\t\t\t\t\tlatitude: pos[i].lat,\r\n\t\t\t\t\t\tlongitude: pos[i].lng,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tmarks[i] = {\r\n\t\t\t\t\t\tid: pos[i].id,\r\n\t\t\t\t\t\tlatitude: pos[i].lat,\r\n\t\t\t\t\t\tlongitude: pos[i].lng,\r\n\t\t\t\t\t\ticonPath: '/static/p.svg',\r\n\t\t\t\t\t\tcallout: {\r\n\t\t\t\t\t\t\tcontent: \r\n\t\t\t\t\t\t\t\tthis.users[i].wx_name +'/n'+\r\n\t\t\t\t\t\t\t\tthis.users[i].phone,\r\n\t\t\t\t\t\t\tborderRadius: 10,\r\n\t\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\t\tdisplay: 'BYCLICK'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.markers = marks;\r\n\t\t\t\tthis.includePoints = includePoints;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tasync getLocation(pos_id) {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tlet status = await this.checkPermission();\r\n\t\t\t\tif (status !== 1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN \r\n\t\t\t\tvar status = await this.getSetting();\r\n\t\t\t\tif (status === 2) {\r\n\t\t\t\t\tthis.showConfirm();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.doGetLocation(pos_id);\r\n\t\t\t},\r\n\t\t\tdoGetLocation(pos_id) {\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\r\n\t\t\t\t\t\tvar location = {\r\n\t\t\t\t\t\t\tlatitude: res.latitude,\r\n\t\t\t\t\t\t\tlongitude: res.longitude\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tconsole.log(location.latitude)\r\n\t\t\t\t\t\tconsole.log(location.latitude)\r\n\t\t\t\t\t\tconsole.log(uni.getStorageSync('userDetail').id)\r\n\r\n\t\t\t\t\t\tnew Promise(resolve => {\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t\"content-type\": \"application/JSON\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\turl: this.api.ApiRoot + \"locations/\" + pos_id + \"/\",\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\"id\": this.pos_id,\r\n\t\t\t\t\t\t\t\t\t\"address\": \"当前地址\",\r\n\t\t\t\t\t\t\t\t\t\"lat\": location.latitude,\r\n\t\t\t\t\t\t\t\t\t\"lng\": location.longitude,\r\n\t\t\t\t\t\t\t\t\t\"user\": uni.getStorageSync('userDetail').id\r\n\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\tmethod: \"PUT\",\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"位置更新成功\");\r\n\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}).catch((e) => {});\r\n\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t// #ifdef MP-BAIDU\r\n\t\t\t\t\t\tif (err.errCode === 202 || err.errCode === 10003) { // 202模拟器 10003真机 user deny\r\n\t\t\t\t\t\t\tthis.showConfirm();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifndef MP-BAIDU\r\n\t\t\t\t\t\tif (err.errMsg.indexOf(\"auth deny\") >= 0) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"访问位置被拒绝\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: err.errMsg\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tgetSetting: function() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.getSetting({\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.authSetting['scope.userLocation'] === undefined) {\r\n\t\t\t\t\t\t\t\tresolve(0);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.authSetting['scope.userLocation']) {\r\n\t\t\t\t\t\t\t\tresolve(1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tresolve(2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\topenSetting: function() {\r\n\t\t\t\tthis.hideConfirm();\r\n\t\t\t\tuni.openSetting({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.authSetting && res.authSetting['scope.userLocation']) {\r\n\t\t\t\t\t\t\tthis.doGetLocation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync checkPermission() {\r\n\t\t\t\tlet status = permision.isIOS ? await permision.requestIOS('location') :\r\n\t\t\t\t\tawait permision.requestAndroid('android.permission.ACCESS_FINE_LOCATION');\r\n\t\t\t\tif (status === null || status === 1) {\r\n\t\t\t\t\tstatus = 1;\r\n\t\t\t\t} else if (status === 2) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: \"系统定位已关闭\",\r\n\t\t\t\t\t\tconfirmText: \"确定\",\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tsuccess: function(res) {}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (status.code) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: status.message\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: \"需要定位权限\",\r\n\t\t\t\t\t\tconfirmText: \"设置\",\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tpermision.gotoAppSetting();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn status;\r\n\t\t\t},\r\n\t\t\tclear: function() {\r\n\t\t\t\tthis.hasLocation = false\r\n\t\t\t},\r\n\t\t\t// 点击marker\r\n\t\t\tmakertap(e) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: JSON.stringify(e)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.content {\r\n\t\tflex: 1;\r\n\r\n\t}\r\n\r\n\t.map {\r\n\t\twidth: 750rpx;\r\n\t\theight: 1500rpx;\r\n\r\n\r\n\t\tbackground-color: #f0f0f0;\r\n\t}\r\n\r\n\t.scrollview {\r\n\t\tflex: 1;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.list-item {\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: nowrap;\r\n\t\talign-items: center;\r\n\t\tpadding: 5px 0px;\r\n\t}\r\n\r\n\t.list-text {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.button {\r\n\t\tmargin-top: 5px;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t.tips {\r\n\t\twidth: 600rpx;\r\n\t\theight: 100rpx;\r\n\t\tmargin: 10rpx auto;\r\n\t\tborder-radius: 10rpx;\r\n\t\tposition: absolute;\r\n\t\ttop: 10rpx;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, 0);\r\n\t\tz-index: 2;\r\n\t\toverflow: hidden;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./location.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./location.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1612517708261\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}